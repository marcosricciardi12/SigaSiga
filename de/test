import cv2

# Cargar el video
video = cv2.VideoCapture('/home/marcos/output.mkv')

# Cargar la imagen PNG con transparencia
imagen = cv2.imread('/home/marcos/sb.png', cv2.IMREAD_UNCHANGED)
imagen = cv2.resize(imagen, (360, 60))
# Obtener el tamaño de la imagen
altura, ancho, _ = imagen.shape
ancho_v = int(video.get(cv2.CAP_PROP_FRAME_WIDTH))
altura_v = int(video.get(cv2.CAP_PROP_FRAME_HEIGHT))
# Iterar sobre los frames del video
while True:
    # Leer el siguiente frame
    ret, frame = video.read()
    if not ret:
        break

    # Superponer la imagen en el frame
    superposicion = frame.copy()
    x, y = ancho_v - 460, altura_v - 160  # Coordenadas donde se superpondrá la imagen
    superposicion[y:y+altura, x:x+ancho] = imagen[:, :, :3] * (imagen[:, :, 3:] / 255.0) + frame[y:y+altura, x:x+ancho] * (1.0 - imagen[:, :, 3:] / 255.0)

    # Mostrar el video resultante
    cv2.imshow('Video con imagen superpuesta', superposicion)
    
    # Salir con la tecla 'q'
    if cv2.waitKey(25) & 0xFF == ord('q'):
        break

# Liberar recursos
video.release()
cv2.destroyAllWindows()